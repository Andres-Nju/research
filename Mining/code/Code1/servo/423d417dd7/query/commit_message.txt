fix logic in overflow_direction, also add a FIXMEfix logic in overflow_direction, also add a FIXME