fix futures aliasing mutable and shared ref