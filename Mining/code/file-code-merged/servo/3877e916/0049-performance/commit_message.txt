fix observer comparing and test
