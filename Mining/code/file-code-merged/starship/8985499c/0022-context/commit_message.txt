fix: allow compilation without battery feature (#3435)

