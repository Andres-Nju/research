executor: block thread when needed in block fn (#1303)

Fix #1296