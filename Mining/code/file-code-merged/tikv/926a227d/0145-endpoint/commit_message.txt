Fix a failing test due to recursion limit (#6102)

Signed-off-by: Nick Cameron <nrc@ncameron.org>