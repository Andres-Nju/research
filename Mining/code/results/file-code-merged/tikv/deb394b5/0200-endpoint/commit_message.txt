endpoint: fix a divide zero bug (#2219)

