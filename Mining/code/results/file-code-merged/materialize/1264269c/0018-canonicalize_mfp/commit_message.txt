optimize: fuse filters during canonicalize mfp (#10359)

